```
import type { SelectedViewpoint } from '../types/map';

interface LayerMenuProps {
    selectedViewpoint: SelectedViewpoint;
    layerOpacity: number;
    onSelectViewpoint: (viewpoint: SelectedViewpoint) => void;
    onChangeOpacity: (value: number) => void;
    isOpen: boolean;
    onOpen: () => void;
    onClose: () => void;
}

const VIEWPOINT_CARDS: { id: SelectedViewpoint; label: string; imageUrl?: string }[] = [
    { id: 'tokyoTower', label: 'Tokyo Tower', imageUrl: '/tokyotower_red_tile/14/14553/6451.png' }, // Placeholder image
    { id: 'skytree', label: 'Tokyo Skytree', imageUrl: '' }, // Placeholder
    { id: 'none', label: 'None' },
];

export default function LayerMenu({
    selectedViewpoint,
    layerOpacity,
    onSelectViewpoint,
    onChangeOpacity,
    isOpen,
    onOpen,
    onClose,
}: LayerMenuProps) {
    return (
        <>
            {/* Backdrop for mobile */}
            {isOpen && (
                <div
                    className="layer-menu-backdrop fixed inset-0 bg-black/30 z-20 md:hidden"
                    onClick={onClose}
                />
            )}

            <div
                className={`layer - menu - container fixed bottom - 0 left - 0 right - 0 bg - white z - 30 transition - transform duration - 300 ease -in -out md:relative md: transform - none md: w - 80 md: h - full md: shadow - lg flex flex - col ${
    isOpen ? 'translate-y-0' : 'translate-y-[calc(100%-60px)] md:translate-y-0'
} `}
            >
                {/* Handle (Mobile only) */}
                <div
                    className="layer-menu-handle h-[60px] flex items-center justify-center cursor-pointer border-t border-gray-200 md:hidden"
                    onClick={isOpen ? onClose : onOpen}
                >
                    <div className="flex flex-col items-center">
                        <div className="layer-menu-handle-bar w-10 h-1 bg-gray-300 rounded-full mb-2" />
                        <span className="layer-menu-handle-label text-sm text-gray-600 font-medium">
                            {isOpen ? '下に押して閉じる' : 'レイヤー選択'}
                        </span>
                    </div>
                </div>

                {/* Content */}
                <div className="flex-1 overflow-y-auto p-4">
                    <h2 className="text-lg font-bold mb-4 hidden md:block">Viewshed Layers</h2>

                    {/* Layer Selection */}
                    <div className="mb-6">
                        <h3 className="text-sm font-semibold text-gray-500 mb-2">Select Viewpoint</h3>
                        <div className="layer-menu-card-list flex space-x-4 overflow-x-auto pb-2 md:flex-col md:space-x-0 md:space-y-2">
                            {VIEWPOINT_CARDS.map((card) => (
                                <button
                                    key={card.id}
                                    onClick={() => onSelectViewpoint(card.id)}
                                    className={`flex - shrink - 0 w - 32 h - 32 md: w - full md: h - auto md: p - 3 rounded - lg border - 2 flex flex - col items - center justify - center transition - colors ${
    selectedViewpoint === card.id
        ? 'border-blue-500 bg-blue-50'
        : 'border-gray-200 hover:border-gray-300'
} `}
                                >
                                    {/* Placeholder for image */}
                                    <div className="w-12 h-12 bg-gray-200 rounded-full mb-2 md:hidden" />
                                    <span className="font-medium text-sm">{card.label}</span>
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* Opacity Slider */}
                    <div className="mb-6">
                        <h3 className="text-sm font-semibold text-gray-500 mb-2">Layer Opacity</h3>
                        <input
                            type="range"
                            min="0"
                            max="1"
                            step="0.1"
                            value={layerOpacity}
                            onChange={(e) => onChangeOpacity(parseFloat(e.target.value))}
                            className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                        />
                        <div className="text-right text-sm text-gray-500 mt-1">
                            {Math.round(layerOpacity * 100)}%
                        </div>
                    </div>
                </div>
            </div>
        </>
    );
}
